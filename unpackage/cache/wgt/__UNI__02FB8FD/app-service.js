if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((o=>t.resolve(e()).then((()=>o))),(o=>t.resolve(e()).then((()=>{throw o}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...o){uni.__log__?uni.__log__(e,t,...o):console[e].apply(console,[...o,t])}function o(e,t){return"string"==typeof e?t:e}const n=t=>(o,n=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,o,n)},s=n("onShow"),a=n("onLoad"),i=n("onReachBottom"),l=n("onPullDownRefresh"),c=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}],r=(e,t)=>{const o=e.__vccOpts||e;for(const[n,s]of t)o[n]=s;return o};const u=r({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:c}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,o,n,s,a,i){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle(i.styleObj),class:e.normalizeClass(["uni-icons",["uniui-"+n.type,n.customPrefix,n.customPrefix?n.type:""]]),onClick:o[0]||(o[0]=(...e)=>i._onClick&&i._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-5610c8db"]]),d=r({__name:"my-search",props:{backgroundColor:{type:String,default:"#c00000"},borderRadius:{type:Number,default:15}},setup(t){const n=()=>{uni.navigateTo({url:"/goods/goodsSearch/goodsSearch"})};return(s,a)=>{const i=o(e.resolveDynamicComponent("uni-icons"),u);return e.openBlock(),e.createElementBlock("view",{class:"my-search-container",style:e.normalizeStyle({"background-color":t.backgroundColor})},[e.createElementVNode("view",{class:"my-search-box",style:e.normalizeStyle({"border-radius":t.borderRadius+"px"}),onClick:n},[e.createVNode(i,{type:"search",size:"17"}),e.createElementVNode("text",{class:"placeholder"},"搜索")],4)],4)}}},[["__scopeId","data-v-4a79fb15"]]);
/*!
   * pinia v2.1.7
   * (c) 2023 Eduardo San Martin Morote
   * @license MIT
   */
let p;const f=e=>p=e,m=Symbol();function h(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var g,y;(y=g||(g={})).direct="direct",y.patchObject="patch object",y.patchFunction="patch function";const _="undefined"!=typeof window;function v(){const t=e.effectScope(!0),o=t.run((()=>e.ref({})));let n=[],s=[];const a=e.markRaw({install(e){f(a),a._a=e,e.provide(m,a),e.config.globalProperties.$pinia=a,s.forEach((e=>n.push(e))),s=[]},use(e){return this._a?n.push(e):s.push(e),this},_p:n,_a:null,_e:t,_s:new Map,state:o});return a}const w=()=>{};function k(t,o,n,s=w){t.push(o);const a=()=>{const e=t.indexOf(o);e>-1&&(t.splice(e,1),s())};return!n&&e.getCurrentScope()&&e.onScopeDispose(a),a}function b(e,...t){e.slice().forEach((e=>{e(...t)}))}const N=e=>e();function E(t,o){t instanceof Map&&o instanceof Map&&o.forEach(((e,o)=>t.set(o,e))),t instanceof Set&&o instanceof Set&&o.forEach(t.add,t);for(const n in o){if(!o.hasOwnProperty(n))continue;const s=o[n],a=t[n];h(a)&&h(s)&&t.hasOwnProperty(n)&&!e.isRef(s)&&!e.isReactive(s)?t[n]=E(a,s):t[n]=s}return t}const V=Symbol();const{assign:x}=Object;function S(t,o,n={},s,a,i){let l;const c=x({actions:{}},n),r={deep:!0};let u,d,p,m=[],y=[];const _=s.state.value[t];let v;function S(o){let n;u=d=!1,"function"==typeof o?(o(s.state.value[t]),n={type:g.patchFunction,storeId:t,events:p}):(E(s.state.value[t],o),n={type:g.patchObject,payload:o,storeId:t,events:p});const a=v=Symbol();e.nextTick().then((()=>{v===a&&(u=!0)})),d=!0,b(m,n,s.state.value[t])}i||_||(s.state.value[t]={}),e.ref({});const C=i?function(){const{state:e}=n,t=e?e():{};this.$patch((e=>{x(e,t)}))}:w;function B(e,o){return function(){f(s);const n=Array.from(arguments),a=[],i=[];function l(e){a.push(e)}function c(e){i.push(e)}let r;b(y,{args:n,name:e,store:T,after:l,onError:c});try{r=o.apply(this&&this.$id===t?this:T,n)}catch(u){throw b(i,u),u}return r instanceof Promise?r.then((e=>(b(a,e),e))).catch((e=>(b(i,e),Promise.reject(e)))):(b(a,r),r)}}const $={_p:s,$id:t,$onAction:k.bind(null,y),$patch:S,$reset:C,$subscribe(o,n={}){const a=k(m,o,n.detached,(()=>i())),i=l.run((()=>e.watch((()=>s.state.value[t]),(e=>{("sync"===n.flush?d:u)&&o({storeId:t,type:g.direct,events:p},e)}),x({},r,n))));return a},$dispose:function(){l.stop(),m=[],y=[],s._s.delete(t)}},T=e.reactive($);s._s.set(t,T);const I=(s._a&&s._a.runWithContext||N)((()=>s._e.run((()=>(l=e.effectScope()).run(o)))));for(const f in I){const o=I[f];if(e.isRef(o)&&(z=o,!e.isRef(z)||!z.effect)||e.isReactive(o))i||(!_||h(A=o)&&A.hasOwnProperty(V)||(e.isRef(o)?o.value=_[f]:E(o,_[f])),s.state.value[t][f]=o);else if("function"==typeof o){const e=B(f,o);I[f]=e,c.actions[f]=o}}var A,z;return x(T,I),x(e.toRaw(T),I),Object.defineProperty(T,"$state",{get:()=>s.state.value[t],set:e=>{S((t=>{x(t,e)}))}}),s._p.forEach((e=>{x(T,l.run((()=>e({store:T,app:s._a,pinia:s,options:c}))))})),_&&i&&n.hydrate&&n.hydrate(T.$state,_),u=!0,d=!0,T}function C(t,o,n){let s,a;const i="function"==typeof o;function l(t,n){const l=e.hasInjectionContext();(t=t||(l?e.inject(m,null):null))&&f(t),(t=p)._s.has(s)||(i?S(s,o,a,t):function(t,o,n,s){const{state:a,actions:i,getters:l}=o,c=n.state.value[t];let r;r=S(t,(function(){c||(n.state.value[t]=a?a():{});const o=e.toRefs(n.state.value[t]);return x(o,i,Object.keys(l||{}).reduce(((o,s)=>(o[s]=e.markRaw(e.computed((()=>{f(n);const e=n._s.get(t);return l[s].call(e,e)}))),o)),{}))}),o,n,0,!0)}(s,a,t));return t._s.get(s)}return"string"==typeof t?(s=t,a=i?n:o):(a=t,s=t.id),l.$id=s,l}let B="Store";function $(e,t){return Array.isArray(t)?t.reduce(((t,o)=>(t[o]=function(){return e(this.$pinia)[o]},t)),{}):Object.keys(t).reduce(((o,n)=>(o[n]=function(){const o=e(this.$pinia),s=t[n];return"function"==typeof s?s.call(this,o):o[s]},o)),{})}const T=$;const I=Object.freeze(Object.defineProperty({__proto__:null,get MutationType(){return g},PiniaVuePlugin:function(e){e.mixin({beforeCreate(){const e=this.$options;if(e.pinia){const t=e.pinia;if(!this._provided){const e={};Object.defineProperty(this,"_provided",{get:()=>e,set:t=>Object.assign(e,t)})}this._provided[m]=t,this.$pinia||(this.$pinia=t),t._a=this,_&&f(t)}else!this.$pinia&&e.parent&&e.parent.$pinia&&(this.$pinia=e.parent.$pinia)},destroyed(){delete this._pStores}})},acceptHMRUpdate:function(e,t){return()=>{}},createPinia:v,defineStore:C,getActivePinia:()=>e.hasInjectionContext()&&e.inject(m)||p,mapActions:function(e,t){return Array.isArray(t)?t.reduce(((t,o)=>(t[o]=function(...t){return e(this.$pinia)[o](...t)},t)),{}):Object.keys(t).reduce(((o,n)=>(o[n]=function(...o){return e(this.$pinia)[t[n]](...o)},o)),{})},mapGetters:T,mapState:$,mapStores:function(...e){return e.reduce(((e,t)=>(e[t.$id+B]=function(){return t(this.$pinia)},e)),{})},mapWritableState:function(e,t){return Array.isArray(t)?t.reduce(((t,o)=>(t[o]={get(){return e(this.$pinia)[o]},set(t){return e(this.$pinia)[o]=t}},t)),{}):Object.keys(t).reduce(((o,n)=>(o[n]={get(){return e(this.$pinia)[t[n]]},set(o){return e(this.$pinia)[t[n]]=o}},o)),{})},setActivePinia:f,setMapStoreSuffix:function(e){B=e},skipHydrate:function(e){return Object.defineProperty(e,V,{})},storeToRefs:function(t){{t=e.toRaw(t);const o={};for(const n in t){const s=t[n];(e.isRef(s)||e.isReactive(s))&&(o[n]=e.toRef(t,n))}return o}}},Symbol.toStringTag,{value:"Module"})),A=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,z=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,D=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function F(e,o){if(!("__proto__"===e||"constructor"===e&&o&&"object"==typeof o&&"prototype"in o))return o;!function(e){t("warn","at node_modules/destr/dist/index.mjs:12",`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function L(e,t){if(null==e)return;let o=e;for(let n=0;n<t.length;n++){if(null==o||null==o[t[n]])return;o=o[t[n]]}return o}function O(e,t,o){if(0===o.length)return t;const n=o[0];return o.length>1&&(t=O("object"==typeof e&&null!==e&&Object.prototype.hasOwnProperty.call(e,n)?e[n]:Number.isInteger(Number(o[1]))?[]:{},t,Array.prototype.slice.call(o,1))),Number.isInteger(Number(n))&&Array.isArray(e)?e.slice()[n]:Object.assign({},e,{[n]:t})}function j(e,t){if(null==e||0===t.length)return e;if(1===t.length){if(null==e)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const o={};for(const t in e)o[t]=e[t];return delete o[t[0]],o}if(null==e[t[0]]){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const o={};for(const t in e)o[t]=e[t];return o}return O(e,j(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function P(e,t){return t.map((e=>e.split("."))).map((t=>[t,L(e,t)])).filter((e=>void 0!==e[1])).reduce(((e,t)=>O(e,t[1],t[0])),{})}function R(e,t){return t.map((e=>e.split("."))).reduce(((e,t)=>j(e,t)),e)}function U(e,{storage:o,serializer:n,key:s,debug:a,pick:i,omit:l,beforeHydrate:c,afterHydrate:r},u,d=!0){try{d&&(null==c||c(u));const t=o.getItem(s);if(t){const o=n.deserialize(t),s=i?P(o,i):o,a=l?R(s,l):s;e.$patch(a)}d&&(null==r||r(u))}catch(p){a&&t("error","at node_modules/pinia-plugin-persistedstate/dist/index.js:30","[pinia-plugin-persistedstate]",p)}}function M(e,{storage:o,serializer:n,key:s,debug:a,pick:i,omit:l}){try{const t=i?P(e,i):e,a=l?R(t,l):t,c=n.serialize(a);o.setItem(s,c)}catch(c){a&&t("error","at node_modules/pinia-plugin-persistedstate/dist/index.js:48","[pinia-plugin-persistedstate]",c)}}var G=function(e={}){return function(t){!function(e,t,o){const{pinia:n,store:s,options:{persist:a=o}}=e;if(!a)return;if(!(s.$id in n.state.value)){const e=n._s.get(s.$id.replace("__hot:",""));return void(e&&Promise.resolve().then((()=>e.$persist())))}const i=(Array.isArray(a)?a:!0===a?[{}]:[a]).map(t);s.$hydrate=({runHooks:t=!0}={})=>{i.forEach((o=>{U(s,o,e,t)}))},s.$persist=()=>{i.forEach((e=>{M(s.$state,e)}))},i.forEach((t=>{U(s,t,e),s.$subscribe(((e,o)=>M(o,t)),{detached:!0})}))}(t,(o=>({key:(e.key?e.key:e=>e)(o.key??t.store.$id),debug:o.debug??e.debug??!1,serializer:o.serializer??e.serializer??{serialize:e=>JSON.stringify(e),deserialize:e=>function(e,t={}){if("string"!=typeof e)return e;const o=e.trim();if('"'===e[0]&&e.endsWith('"')&&!e.includes("\\"))return o.slice(1,-1);if(o.length<=9){const e=o.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!D.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(A.test(e)||z.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,F)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}(e)},storage:o.storage??e.storage??window.localStorage,beforeHydrate:o.beforeHydrate,afterHydrate:o.afterHydrate,pick:o.pick,omit:o.omit})),e.auto??!1)}}();const q=C("cart",(()=>{const t=e.ref("abc"),o=e.ref(uni.getStorageSync("cartList")||[]),n=e.computed((()=>o.value.reduce(((e,t)=>e+t.goods_count),0))),s=()=>{uni.setStorageSync("cartList",o.value),uni.setStorageSync("cartTotal",n.value)},a=()=>{if(0===n.value)return uni.removeTabBarBadge({index:2});uni.setTabBarBadge({index:2,text:n.value+""})},i=e.computed((()=>o.value.filter((e=>e.goods_state)).reduce(((e,t)=>e+t.goods_count),0))),l=e.computed((()=>o.value.filter((e=>e.goods_state)).reduce(((e,t)=>e+t.goods_count*t.goods_price),0).toFixed(2)));return{ceshi:t,cartList:o,cartTotal:n,checkedGoodsCount:i,checkedGoodsAmount:l,addGoodsToCartList:e=>{const t=o.value.find((t=>t.goods_id===e.goods_id));t?t.goods_count++:o.value.push(e),a(),s()},setBadge:a,updateGoodsState:e=>{const t=o.value.find((t=>t.goods_id===e.goods_id));t&&(t.goods_state=e.goods_state),a(),s()},updateGoodsCount:e=>{const t=o.value.find((t=>t.goods_id===e.goods_id));t&&(t.goods_count=e.goods_count),a(),s()},deleteGoods:e=>{const t=o.value.filter((t=>t.goods_id!==e.goods_id));o.value=t,a(),s()},updateCheckedGoodsState:e=>{o.value.forEach((t=>t.goods_state=e)),a(),s()}}})),H=C("user",(()=>{const o=e.ref(uni.getStorageSync("address")||{}),n=e.computed((()=>o.value.provinceName+o.value.cityName+o.value.countyName+o.value.detailInfo)),s=e.ref("Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjIzLCJpYXQiOjE1NjQ3MzAwNzksImV4cCI6MTAwMTU2NDczMDA3OH0.YPt-XeLnjV-_1ITaXGY2FhxmCe4NvXuRnRB8OMCfnPo"),a=e.ref(uni.getStorageSync("userInfo")||{}),i=e=>{uni.setStorageSync("userInfo",e)},l=()=>{uni.setStorageSync("token",s.value)},c=e.ref(uni.getStorageSync("newUserInfo")||{}),r=e=>{uni.setStorageSync("newUserInfo",e)},u=e.ref({});return{address:o,token:s,userInfo:a,newUserInfo:c,redirectInfo:u,addressString:n,updateAddress:e=>{o.value=e,uni.setStorageSync("address",e)},updateUserInfo:e=>{a.value=e,i(a.value),t("log","at store/modules/user.js:35",a.value)},updateToken:e=>{s.value=e,l()},saveTokenToStorage:l,newUserInfo:c,updateNewUserInfo:e=>{c.value=e,r(c.value),t("log","at store/modules/user.js:62",c.value)},saveNewUserInfoToStorage:r,updateRedirectInfo:e=>{u.value=e}}}));v().use(G);const J=r({__name:"home",setup(t){const n=q();s((()=>{n.cartTotal&&n.setBadge()}));const a=e.ref([]);(async()=>{const{data:e}=await uni.$http.get("/api/public/v1/home/swiperdata");if(200!==e.meta.status)return uni.$showToast("轮播图请求失败");a.value=e.message})();const i=e.ref([]);(async()=>{const{data:e}=await uni.$http.get("/api/public/v1/home/catitems");if(200!==e.meta.status)return uni.$showToast("分类请求失败");i.value=e.message})();const l=e.ref([]);return(async()=>{const{data:e}=await uni.$http.get("/api/public/v1/home/floordata");if(200!==e.meta.status)return uni.$showMsg();e.message.forEach((e=>{e.product_list.forEach((e=>{e.url="/goods/goodsList/goodsList?"+e.navigator_url.split("?")[1]}))})),l.value=e.message})(),(t,n)=>{const s=o(e.resolveDynamicComponent("my-search"),d);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(s),e.createElementVNode("view",null,[e.createElementVNode("swiper",{"indicator-dots":!0,autoplay:!0,interval:3e3,duration:1e3,circular:!0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(t=>(e.openBlock(),e.createElementBlock("swiper-item",{key:t.goods_id},[e.createElementVNode("navigator",{class:"swiper-item",url:"/goods/goodsDetail/goodsDetail?goods_id="+t.goods_id},[e.createElementVNode("image",{src:t.image_src},null,8,["src"])],8,["url"])])))),128))])]),e.createElementVNode("view",{class:"nav-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"nav-item",key:o,onClick:e=>(e=>{"分类"===e.name&&uni.switchTab({url:"/pages/cate/cate"})})(t)},[e.createElementVNode("image",{src:t.image_src,class:"nav-img"},null,8,["src"])],8,["onClick"])))),128))]),e.createElementVNode("view",{class:"floor-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"floor-item",key:o},[e.createElementVNode("image",{src:t.floor_title.image_src,class:"floor-title"},null,8,["src"]),e.createElementVNode("view",{class:"floor-img-box"},[e.createElementVNode("navigator",{class:"left-img-box",url:t.product_list[0].url},[e.createElementVNode("image",{src:t.product_list[0].image_src,style:e.normalizeStyle({width:t.product_list[0].image_width+"rpx"}),mode:"widthFix"},null,12,["src"])],8,["url"]),e.createElementVNode("view",{class:"right-img-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.product_list,((t,o)=>(e.openBlock(),e.createElementBlock("navigator",{class:"right-img-item",key:o,url:t.url},[0!==o?(e.openBlock(),e.createElementBlock("image",{key:0,src:t.image_src,mode:"widthFix",style:e.normalizeStyle({width:t.image_width+"rpx"})},null,12,["src"])):e.createCommentVNode("",!0)],8,["url"])))),128))])])])))),128))])],64)}}},[["__scopeId","data-v-c5781cb4"]]),X=r({__name:"cate",setup(t){const n=q();s((()=>{n.cartTotal&&n.setBadge()}));const a=uni.$deviceInfo.windowHeight-50,i=e.ref([]),l=e.ref([]);(async()=>{const{data:e}=await uni.$http.get("/api/public/v1/categories");if(200!==e.meta.status)return uni.$showToast();i.value=e.message,l.value=e.message[0].children})();const c=e.ref(0),r=e.ref(0),u=e.ref("#c00000"),p=e.ref(15);return(t,n)=>{const s=o(e.resolveDynamicComponent("my-search"),d);return e.openBlock(),e.createElementBlock("view",null,[e.createVNode(s,{backgroundColor:u.value,borderRadius:p.value},null,8,["backgroundColor","borderRadius"]),e.createElementVNode("view",{class:"scroll-view-container"},[e.createElementVNode("scroll-view",{class:"left-scroll-view","scroll-y":"",style:e.normalizeStyle({height:a+"px"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:t.cat_id,onClick:e=>(e=>{c.value=e,l.value=i.value[e].children,r.value=0===r.value?.1:0})(o)},[e.createElementVNode("view",{class:e.normalizeClass(["left-scroll-view-item",o===c.value?"active":""])},e.toDisplayString(t.cat_name),3)],8,["onClick"])))),128))],4),e.createElementVNode("scroll-view",{class:"right-scroll-view","scroll-y":"",style:e.normalizeStyle({height:a+"px"}),"scroll-top":r.value},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(t=>(e.openBlock(),e.createElementBlock("view",{class:"cate-lv2",key:t.cat_id},[e.createElementVNode("view",{class:"cate-lv2-title"},"/ "+e.toDisplayString(t.cat_name)+" /",1),e.createElementVNode("view",{class:"cate-lv3-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.children,(t=>(e.openBlock(),e.createElementBlock("view",{class:"cate-lv3-item",key:t.cat_id,onClick:e=>(e=>{uni.navigateTo({url:"/goods/goodsList/goodsList?cid="+e.cat_id})})(t)},[e.createElementVNode("image",{src:t.cat_icon},null,8,["src"]),e.createElementVNode("text",null,e.toDisplayString(t.cat_name),1)],8,["onClick"])))),128))])])))),128))],12,["scroll-top"])])])}}},[["__scopeId","data-v-96e75f7f"]]),Y=r({__name:"my-address",setup(n){const s=H(),a=e.ref(s.address),i=e.ref(s.addressString),l=async()=>{const e=await uni.chooseAddress().catch((e=>e));if("chooseAddress:ok"===e.errMsg)return s.updateAddress(e);!e||"chooseAddress:fail auth deny"!==e.errMsg&&"chooseAddress:fail authorize no response"!==e.errMsg||c()},c=async()=>{const[e,t]=await uni.showModal({content:"检测到您没打开地址权限，是否去设置打开？",confirmText:"确认",cancelText:"取消"});if(!e)return t.cancel?uni.$showToast("您取消了地址授权！"):t.confirm?uni.openSetting({success:e=>e.authSetting["scope.address"]?uni.$showToast("授权成功！请选择地址"):e.authSetting["scope.address"]?void 0:uni.$showToast("您取消了地址授权！")}):void 0};return e.watch((()=>s),(e=>{a.value=e.address,i.value=e.addressString,t("log","at components/my-address/my-address.vue:63","111",i.value)}),{deep:!0}),(t,n)=>{const s=o(e.resolveDynamicComponent("uni-icons"),u);return e.openBlock(),e.createElementBlock("view",null,["{}"===JSON.stringify(a.value)?(e.openBlock(),e.createElementBlock("view",{key:0,class:"address-choose-box"},[e.createElementVNode("button",{type:"primary",size:"mini",class:"btnChooseAddress",onClick:l},"请选择收货地址+")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"address-info-box",onClick:l},[e.createElementVNode("view",{class:"row1"},[e.createElementVNode("view",{class:"row1-left"},[e.createElementVNode("view",{class:"username"},[e.createTextVNode("收货人："),e.createElementVNode("text",null,e.toDisplayString(a.value.userName),1)])]),e.createElementVNode("view",{class:"row1-right"},[e.createElementVNode("view",{class:"phone"},[e.createTextVNode("电话："),e.createElementVNode("text",null,e.toDisplayString(a.value.telNumber),1)]),e.createVNode(s,{type:"arrowright",size:"16"})])]),e.createElementVNode("view",{class:"row2"},[e.createElementVNode("view",{class:"row2-left"},"收货地址："),e.createElementVNode("view",{class:"row2-right"},e.toDisplayString(i.value),1)])])),e.createElementVNode("image",{src:"/static/c9.png",class:"address-border"})])}}},[["__scopeId","data-v-4c246e5f"]]);const W=r({name:"UniNumberBox",emits:["change","input","update:modelValue","blur","focus"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},background:{type:String,default:"#f5f5f5"},color:{type:String,default:"#333"},disabled:{type:Boolean,default:!1},width:{type:Number,default:40}},data:()=>({inputValue:0}),watch:{value(e){this.inputValue=+e},modelValue(e){this.inputValue=+e}},computed:{widthWithPx(){return this.width+"px"}},created(){1===this.value&&(this.inputValue=+this.modelValue),1===this.modelValue&&(this.inputValue=+this.value)},methods:{_calcValue(e){if(this.disabled)return;const t=this._getDecimalScale();let o=this.inputValue*t,n=this.step*t;if("minus"===e){if(o-=n,o<this.min*t)return;o>this.max*t&&(o=this.max*t)}if("plus"===e){if(o+=n,o>this.max*t)return;o<this.min*t&&(o=this.min*t)}this.inputValue=(o/t).toFixed(String(t).length-1),this.$emit("input",+this.inputValue),this.$emit("update:modelValue",+this.inputValue),this.$emit("change",+this.inputValue)},_getDecimalScale(){let e=1;return~~this.step!==this.step&&(e=Math.pow(10,String(this.step).split(".")[1].length)),e},_onBlur(e){this.$emit("blur",e);let t=e.detail.value;if(isNaN(t))return void(this.inputValue=this.value);t=+t,t>this.max?t=this.max:t<this.min&&(t=this.min);const o=this._getDecimalScale();this.inputValue=t.toFixed(String(o).length-1),this.$emit("input",+this.inputValue),this.$emit("update:modelValue",+this.inputValue),this.$emit("change",+this.inputValue)},_onFocus(e){this.$emit("focus",e)}}},[["render",function(t,o,n,s,a,i){return e.openBlock(),e.createElementBlock("view",{class:"uni-numbox"},[e.createElementVNode("view",{onClick:o[0]||(o[0]=e=>i._calcValue("minus")),class:"uni-numbox__minus uni-numbox-btns",style:e.normalizeStyle({background:n.background})},[e.createElementVNode("text",{class:e.normalizeClass(["uni-numbox--text",{"uni-numbox--disabled":a.inputValue<=n.min||n.disabled}]),style:e.normalizeStyle({color:n.color})},"-",6)],4),e.withDirectives(e.createElementVNode("input",{disabled:n.disabled,onFocus:o[1]||(o[1]=(...e)=>i._onFocus&&i._onFocus(...e)),onBlur:o[2]||(o[2]=(...e)=>i._onBlur&&i._onBlur(...e)),class:"uni-numbox__value",type:n.step<1?"digit":"number","onUpdate:modelValue":o[3]||(o[3]=e=>a.inputValue=e),style:e.normalizeStyle({background:n.background,color:n.color,width:i.widthWithPx})},null,44,["disabled","type"]),[[e.vModelDynamic,a.inputValue]]),e.createElementVNode("view",{onClick:o[4]||(o[4]=e=>i._calcValue("plus")),class:"uni-numbox__plus uni-numbox-btns",style:e.normalizeStyle({background:n.background})},[e.createElementVNode("text",{class:e.normalizeClass(["uni-numbox--text",{"uni-numbox--disabled":a.inputValue>=n.max||n.disabled}]),style:e.normalizeStyle({color:n.color})},"+",6)],4)])}],["__scopeId","data-v-8e354f23"]]),Q=r({__name:"my-goods",props:{goods:{type:Object,default:{}},showRadio:{type:Boolean,default:!1},showNum:{type:Boolean,default:!1}},emits:["radioChange","numberChange"],setup(t,{emit:n}){const s=t,a=n,i=()=>{a("radioChange",{goods_id:s.goods.goods_id,goods_state:!s.goods.goods_state,goods_count:+s.goods.goods_count})},l=e=>{a("numberChange",{goods_id:s.goods.goods_id,goods_count:+e})};return(n,s)=>{const a=o(e.resolveDynamicComponent("uni-number-box"),W);return e.openBlock(),e.createElementBlock("view",{class:"goods-item"},[e.createElementVNode("view",{class:"goods-item-left"},[t.showRadio?(e.openBlock(),e.createElementBlock("radio",{key:0,checked:t.goods.goods_state,color:"#C00000",onClick:i},null,8,["checked"])):e.createCommentVNode("",!0),e.createElementVNode("image",{src:t.goods.goods_small_logo||"https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMDg3MV8zfDF8c2VhcmNofDJ8fHNwcm5nfGVufDB8fHx8MTY0NzM5NTY1Mw&ixlib=rb-1.2.1&q=80&w=1080",class:"goods-pic"},null,8,["src"])]),e.createElementVNode("view",{class:"goods-item-right"},[e.createElementVNode("view",{class:"goods-name"},e.toDisplayString(t.goods.goods_name),1),e.createElementVNode("view",{class:"goods-info-box"},[e.createElementVNode("view",{class:"goods-price"},"￥"+e.toDisplayString(t.goods.goods_price.toFixed(2)),1),t.showNum?(e.openBlock(),e.createBlock(a,{key:0,min:1,value:t.goods.goods_count,onChange:l},null,8,["value"])):e.createCommentVNode("",!0)])])])}}},[["__scopeId","data-v-b6939b59"]]);let K={};K={data:()=>({is_show:"none"}),watch:{show(e){this.is_show=this.show}},created(){this.swipeaction=this.getSwipeAction(),this.swipeaction&&Array.isArray(this.swipeaction.children)&&this.swipeaction.children.push(this)},mounted(){this.is_show=this.show},methods:{closeSwipe(e){this.autoClose&&this.swipeaction&&this.swipeaction.closeOther(this)},change(e){this.$emit("change",e.open),this.is_show!==e.open&&(this.is_show=e.open)},appTouchStart(e){const{clientX:t}=e.changedTouches[0];this.clientX=t,this.timestamp=(new Date).getTime()},appTouchEnd(e,t,o,n){const{clientX:s}=e.changedTouches[0];let a=Math.abs(this.clientX-s),i=(new Date).getTime()-this.timestamp;a<40&&i<300&&this.$emit("click",{content:o,index:t,position:n})},onClickForPC(e,t,o){}}};const Z=e=>{(e.$wxs||(e.$wxs=[])).push("wxsswipe"),(e.$wxsModules||(e.$wxsModules={})).wxsswipe="afd46426"},ee=e=>{(e.$renderjs||(e.$renderjs=[])).push("renderswipe"),(e.$renderjsModules||(e.$renderjsModules={})).renderswipe="5a1e922e"},te={mixins:[K,{},{}],emits:["click","change"],props:{show:{type:String,default:"none"},disabled:{type:Boolean,default:!1},autoClose:{type:Boolean,default:!0},threshold:{type:Number,default:20},leftOptions:{type:Array,default:()=>[]},rightOptions:{type:Array,default:()=>[]}},unmounted(){this.__isUnmounted=!0,this.uninstall()},methods:{uninstall(){this.swipeaction&&this.swipeaction.children.forEach(((e,t)=>{e===this&&this.swipeaction.children.splice(t,1)}))},getSwipeAction(e="uniSwipeAction"){let t=this.$parent,o=t.$options.name;for(;o!==e;){if(t=t.$parent,!t)return!1;o=t.$options.name}return t}}};Z(te),ee(te);const oe=r(te,[["render",function(t,o,n,s,a,i){return e.openBlock(),e.createElementBlock("view",{class:"uni-swipe"},[e.createElementVNode("view",{class:"uni-swipe_box","change:prop":t.wxsswipe.showWatch,prop:e.wp(t.is_show),"data-threshold":n.threshold,"data-disabled":n.disabled,onTouchstart:o[2]||(o[2]=(...e)=>t.wxsswipe.touchstart&&t.wxsswipe.touchstart(...e)),onTouchmove:o[3]||(o[3]=(...e)=>t.wxsswipe.touchmove&&t.wxsswipe.touchmove(...e)),onTouchend:o[4]||(o[4]=(...e)=>t.wxsswipe.touchend&&t.wxsswipe.touchend(...e))},[e.createElementVNode("view",{class:"uni-swipe_button-group button-group--left"},[e.renderSlot(t.$slots,"left",{},(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.leftOptions,((n,s)=>(e.openBlock(),e.createElementBlock("view",{key:s,style:e.normalizeStyle({backgroundColor:n.style&&n.style.backgroundColor?n.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:o[0]||(o[0]=e.withModifiers(((...e)=>t.appTouchStart&&t.appTouchStart(...e)),["stop"])),onTouchend:e.withModifiers((e=>t.appTouchEnd(e,s,n,"left")),["stop"]),onClick:e.withModifiers((e=>t.onClickForPC(s,n,"left")),["stop"])},[e.createElementVNode("text",{class:"uni-swipe_button-text",style:e.normalizeStyle({color:n.style&&n.style.color?n.style.color:"#FFFFFF",fontSize:n.style&&n.style.fontSize?n.style.fontSize:"16px"})},e.toDisplayString(n.text),5)],44,["onTouchend","onClick"])))),128))]),!0)]),e.createElementVNode("view",{class:"uni-swipe_text--center"},[e.renderSlot(t.$slots,"default",{},void 0,!0)]),e.createElementVNode("view",{class:"uni-swipe_button-group button-group--right"},[e.renderSlot(t.$slots,"right",{},(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.rightOptions,((n,s)=>(e.openBlock(),e.createElementBlock("view",{key:s,style:e.normalizeStyle({backgroundColor:n.style&&n.style.backgroundColor?n.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:o[1]||(o[1]=e.withModifiers(((...e)=>t.appTouchStart&&t.appTouchStart(...e)),["stop"])),onTouchend:e.withModifiers((e=>t.appTouchEnd(e,s,n,"right")),["stop"]),onClick:e.withModifiers((e=>t.onClickForPC(s,n,"right")),["stop"])},[e.createElementVNode("text",{class:"uni-swipe_button-text",style:e.normalizeStyle({color:n.style&&n.style.color?n.style.color:"#FFFFFF",fontSize:n.style&&n.style.fontSize?n.style.fontSize:"16px"})},e.toDisplayString(n.text),5)],44,["onTouchend","onClick"])))),128))]),!0)])],40,["change:prop","prop","data-threshold","data-disabled"])])}],["__scopeId","data-v-6a9a96fd"]]);const ne=r({name:"uniSwipeAction",data:()=>({}),created(){this.children=[]},methods:{resize(){},closeAll(){this.children.forEach((e=>{e.is_show="none"}))},closeOther(e){this.openItem&&this.openItem!==e&&(this.openItem.is_show="none"),this.openItem=e}}},[["render",function(t,o,n,s,a,i){return e.openBlock(),e.createElementBlock("view",null,[e.renderSlot(t.$slots,"default")])}]]),se=r({__name:"my-settle",setup(o){const n=q(),s=H(),a=e.computed((()=>0!==n.cartTotal&&n.cartTotal===n.checkedGoodsCount)),i=()=>{n.updateCheckedGoodsState(!a.value)},l=()=>s.newUserInfo.nickname?n.checkedGoodsCount?(t("log","at components/my-settle/my-settle.vue:23",s.addressString),s.addressString?void p():uni.$showToast("请先选择收获地址!")):uni.$showToast("请选择要结算的商品!"):d(),c=e.ref(3),r=e.ref(),u=e=>{uni.showToast({icon:"none",title:"请登录后再结算！"+e+" 秒后自动跳转到登录页",mask:!0,duration:1500})},d=()=>{u(c.value),r.value=setInterval((()=>{if(c.value--,c.value<=0)return clearInterval(r.value),uni.switchTab({url:"/pages/my/my",complete:()=>{s.updateRedirectInfo({openType:"switchTab",from:"/pages/cart/cart"})}}),c.value=3;u(c.value)}),1e3)},p=async()=>{const e={order_price:.01,consignee_addr:s.addressString,goods:n.cartList.filter((e=>e.goods_state)).map((e=>({goods_id:e.goods_id,goods_number:e.goods_count,goods_price:e.goods_price})))},{data:o}=await uni.$http.post("/api/public/v1/my/orders/create",e);if(t("log","at components/my-settle/my-settle.vue:94","111",o),200!==o.meta.status)return uni.$showToast("创建订单失败！");const a=o.message.order_number,{data:i}=await uni.$http.post("/api/public/v1/my/orders/req_unifiedorder",{order_number:a});if(t("log","at components/my-settle/my-settle.vue:104","222",i),200!==i.meta.status)return uni.$showToast("预付订单生成失败！");const l=i.message.pay;if(t("log","at components/my-settle/my-settle.vue:109",l),"NOAUTH"===l.err_code)return uni.$showToast("此商家的收款功能已被限制，暂无法支付");const[c,r]=await uni.requestPayment(l);if(t("log","at components/my-settle/my-settle.vue:126","333",c,r),c)return uni.$showToast("订单未支付！");const{data:u}=await uni.$http.post("/api/public/v1/my/orders/chkOrder",{order_number:a});if(200!==u.meta.status)return uni.$showMsg("订单未支付！");uni.showToast({title:"支付完成！",icon:"success"})};return(t,o)=>(e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"my-settle-container"},[e.createElementVNode("label",{class:"radio",onClick:i},[e.createElementVNode("radio",{color:"#C00000",checked:a.value},null,8,["checked"]),e.createElementVNode("text",null,"全选")]),e.createElementVNode("view",{class:"amount-box"},[e.createTextVNode(" 合计:"),e.createElementVNode("text",{class:"amount"},"￥"+e.toDisplayString(e.unref(n).checkedGoodsAmount),1)]),e.createElementVNode("view",{class:"btn-settle",onClick:l},"结算("+e.toDisplayString(e.unref(n).checkedGoodsCount)+")",1)])]))}},[["__scopeId","data-v-a7a77cab"]]),ae=r({__name:"cart",setup(t){const n=q();s((()=>{n.cartTotal&&(n.setBadge(),a.value=n.cartTotal,i.value=n.cartList)}));const a=e.ref(n.cartTotal.value),i=e.ref(n.cartList.value),l=e=>{n.updateGoodsState(e)},c=e=>{n.updateGoodsCount(e)};e.ref([{text:"删除",style:{backgroundColor:"#C00000"}}]);const r=e.ref(0);e.watch((()=>n.cartList),(e=>{i.value=e,r.value+=1}),{deep:!0});return(t,s)=>{const a=o(e.resolveDynamicComponent("my-address"),Y),d=o(e.resolveDynamicComponent("uni-icons"),u),p=o(e.resolveDynamicComponent("my-goods"),Q),f=o(e.resolveDynamicComponent("uni-swipe-action-item"),oe),m=o(e.resolveDynamicComponent("uni-swipe-action"),ne),h=o(e.resolveDynamicComponent("my-settle"),se);return 0!==e.unref(n).cartList.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"cart-container"},[e.createVNode(a),e.createElementVNode("view",{class:"cart-title"},[e.createVNode(d,{type:"shop",size:"18"}),e.createElementVNode("text",{class:"cart-title-text"},"购物车")]),(e.openBlock(),e.createBlock(m,{key:r.value},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o},[e.createVNode(f,{"right-options":[{text:"删除",style:{backgroundColor:"#C00000"}}],onClick:e=>(e=>{n.deleteGoods(e)})(t)},{default:e.withCtx((()=>[e.createVNode(p,{goods:t,showRadio:!0,onRadioChange:l,onNumberChange:c,showNum:!0},null,8,["goods"])])),_:2},1032,["right-options","onClick"])])))),128))])),_:1})),e.createVNode(h)])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"empty-cart"},[e.createElementVNode("image",{src:"/static/uni.png",class:"empty-img"}),e.createElementVNode("text",{class:"tip-text"},"空空如也~")]))}}},[["__scopeId","data-v-d774a4f3"]]),ie=r({__name:"my-login",setup(n){const s=H(),a=e.ref({nickname:"",avatar:""}),i=async e=>{if(!a.value.nickname)return uni.$showToast("请输入昵称");t("log","at components/my-login/my-login.vue:17",e.detail.avatarUrl),a.value.avatar=e.detail.avatarUrl,s.updateToken("Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjIzLCJpYXQiOjE1NjQ3MzAwNzksImV4cCI6MTAwMTU2NDczMDA3OH0.YPt-XeLnjV-_1ITaXGY2FhxmCe4NvXuRnRB8OMCfnPo"),s.updateNewUserInfo(a.value),c();return"login:ok"!==(await uni.login().catch((e=>e))).errMsg?uni.$showToast("登录失败！"):void 0},l=e=>{a.value.nickname=e.detail.value},c=()=>{s.redirectInfo&&uni.switchTab({url:s.redirectInfo.from,complete:()=>{s.updateRedirectInfo({})}})};return(t,n)=>{const s=o(e.resolveDynamicComponent("uni-icons"),u);return e.openBlock(),e.createElementBlock("view",{class:"login-container"},[e.createVNode(s,{type:"contact-filled",size:"100",color:"#AFAFAF"}),e.createElementVNode("button",{type:"primary",class:"btn-login","open-type":"chooseAvatar",onChooseavatar:i},"一键登录",32),e.createElementVNode("label",{for:"",class:"nicknameInputLabel"},[e.createElementVNode("span",{class:"span"},"昵称"),e.createElementVNode("input",{class:"nicknameInput",type:"nickname",placeholder:"请输入昵称",onChange:l},null,32)]),e.createElementVNode("view",{class:"tips-text"},"登录后尽享更多权益"),e.createElementVNode("view",{class:""}," 温馨提示：仅小程序能够登录，app无法一键登录 ")])}}},[["__scopeId","data-v-fe3a717c"]]),le=r({__name:"my-userInfo",setup(t){const n=H(),s=e.ref(n.newUserInfo),a=async()=>{const e=await uni.showModal({title:"提示",content:"确认退出登录吗？"}).catch((e=>e));e&&e.confirm&&(n.updateNewUserInfo({}),n.updateToken(""),n.updateAddress({}))};return(t,n)=>{const i=o(e.resolveDynamicComponent("uni-icons"),u);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"my-userinfo-container"},[e.createElementVNode("view",{class:"top-box"},[e.createElementVNode("image",{src:s.value.avatar,class:"avatar"},null,8,["src"]),e.createElementVNode("view",{class:"nickname"},e.toDisplayString(s.value.nickname),1)])]),e.createElementVNode("view",{class:"panel-list"},[e.createElementVNode("view",{class:"panel"},[e.createElementVNode("view",{class:"panel-body"},[e.createElementVNode("view",{class:"panel-item"},[e.createElementVNode("text",null,"8"),e.createElementVNode("text",null,"收藏的店铺")]),e.createElementVNode("view",{class:"panel-item"},[e.createElementVNode("text",null,"14"),e.createElementVNode("text",null,"收藏的商品")]),e.createElementVNode("view",{class:"panel-item"},[e.createElementVNode("text",null,"18"),e.createElementVNode("text",null,"关注的商品")]),e.createElementVNode("view",{class:"panel-item"},[e.createElementVNode("text",null,"84"),e.createElementVNode("text",null,"足迹")])])]),e.createElementVNode("view",{class:"panel"},[e.createElementVNode("view",{class:"panel-title"},"我的订单"),e.createElementVNode("view",{class:"panel-body"},[e.createElementVNode("view",{class:"panel-item"},[e.createElementVNode("image",{src:"/static/c1.png",class:"icon"}),e.createElementVNode("text",null,"待付款")]),e.createElementVNode("view",{class:"panel-item"},[e.createElementVNode("image",{src:"/static/c2.png",class:"icon"}),e.createElementVNode("text",null,"待收货")]),e.createElementVNode("view",{class:"panel-item"},[e.createElementVNode("image",{src:"/static/c3.png",class:"icon"}),e.createElementVNode("text",null,"退款/退货")]),e.createElementVNode("view",{class:"panel-item"},[e.createElementVNode("image",{src:"/static/c4.png",class:"icon"}),e.createElementVNode("text",null,"全部订单")])])]),e.createElementVNode("view",{class:"panel"},[e.createElementVNode("view",{class:"panel-list-item"},[e.createElementVNode("text",null,"收货地址"),e.createVNode(i,{type:"arrowright",size:"15"})]),e.createElementVNode("view",{class:"panel-list-item"},[e.createElementVNode("text",null,"联系客服"),e.createVNode(i,{type:"arrowright",size:"15"})]),e.createElementVNode("view",{class:"panel-list-item",onClick:a},[e.createElementVNode("text",null,"退出登录"),e.createVNode(i,{type:"arrowright",size:"15"})]),e.createElementVNode("view",{class:"panel-list-item"}," 温馨提示：该页面仅有退出登录功能 ")])])])}}},[["__scopeId","data-v-64a94fba"]]),ce=r({__name:"my",setup(t){const n=q();s((()=>{n.cartTotal&&n.setBadge()}));const a=H();return(t,n)=>{const s=o(e.resolveDynamicComponent("my-login"),ie),i=o(e.resolveDynamicComponent("my-userInfo"),le);return e.openBlock(),e.createElementBlock("view",{class:"my-container"},[e.unref(a).newUserInfo.avatar?(e.openBlock(),e.createBlock(i,{key:1})):(e.openBlock(),e.createBlock(s,{key:0}))])}}},[["__scopeId","data-v-71fc2548"]]),re=["{","}"];const ue=/^(?:\d)+/,de=/^(?:\w)+/;const pe="zh-Hans",fe="zh-Hant",me="en",he=Object.prototype.hasOwnProperty,ge=(e,t)=>he.call(e,t),ye=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,o=re){if(!t)return[e];let n=this._caches[e];return n||(n=function(e,[t,o]){const n=[];let s=0,a="";for(;s<e.length;){let i=e[s++];if(i===t){a&&n.push({type:"text",value:a}),a="";let t="";for(i=e[s++];void 0!==i&&i!==o;)t+=i,i=e[s++];const l=i===o,c=ue.test(t)?"list":l&&de.test(t)?"named":"unknown";n.push({value:t,type:c})}else a+=i}return a&&n.push({type:"text",value:a}),n}(e,o),this._caches[e]=n),function(e,t){const o=[];let n=0;const s=Array.isArray(t)?"list":(a=t,null!==a&&"object"==typeof a?"named":"unknown");var a;if("unknown"===s)return o;for(;n<e.length;){const a=e[n];switch(a.type){case"text":o.push(a.value);break;case"list":o.push(t[parseInt(a.value,10)]);break;case"named":"named"===s&&o.push(t[a.value])}n++}return o}(n,t)}};function _e(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return pe;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?pe:e.indexOf("-hant")>-1?fe:(o=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==o.indexOf(e)))?fe:pe);var o;let n=[me,"fr","es"];t&&Object.keys(t).length>0&&(n=Object.keys(t));const s=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,n);return s||void 0}class ve{constructor({locale:e,fallbackLocale:t,messages:o,watcher:n,formater:s}){this.locale=me,this.fallbackLocale=me,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=s||ye,this.messages=o||{},this.setLocale(e||me),n&&this.watchLocale(n)}setLocale(e){const t=this.locale;this.locale=_e(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,o=!0){const n=this.messages[e];n?o?Object.assign(n,t):Object.keys(t).forEach((e=>{ge(n,e)||(n[e]=t[e])})):this.messages[e]=t}f(e,t,o){return this.formater.interpolate(e,t,o).join("")}t(e,t,o){let n=this.message;return"string"==typeof t?(t=_e(t,this.messages))&&(n=this.messages[t]):o=t,ge(n,e)?this.formater.interpolate(n[e],o).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}function we(e,t={},o,n){if("string"!=typeof e){const o=[t,e];e=o[0],t=o[1]}"string"!=typeof e&&(e="undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():me),"string"!=typeof o&&(o="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||me);const s=new ve({locale:e,fallbackLocale:o,messages:t,watcher:n});let a=(e,t)=>{if("function"!=typeof getApp)a=function(e,t){return s.t(e,t)};else{let e=!1;a=function(t,o){const n=getApp().$vm;return n&&(n.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(n,s))),s.t(t,o)}}return a(e,t)};return{i18n:s,f:(e,t,o)=>s.f(e,t,o),t:(e,t)=>a(e,t),add:(e,t,o=!0)=>s.add(e,t,o),watch:e=>s.watchLocale(e),getLocale:()=>s.getLocale(),setLocale:e=>s.setLocale(e)}}const ke={en:{"uni-goods-nav.options.shop":"shop","uni-goods-nav.options.cart":"cart","uni-goods-nav.buttonGroup.addToCart":"add to cart","uni-goods-nav.buttonGroup.buyNow":"buy now"},"zh-Hans":{"uni-goods-nav.options.shop":"店铺","uni-goods-nav.options.cart":"购物车","uni-goods-nav.buttonGroup.addToCart":"加入购物车","uni-goods-nav.buttonGroup.buyNow":"立即购买"},"zh-Hant":{"uni-goods-nav.options.shop":"店鋪","uni-goods-nav.options.cart":"購物車","uni-goods-nav.buttonGroup.addToCart":"加入購物車","uni-goods-nav.buttonGroup.buyNow":"立即購買"}},{t:be}=we(ke);const Ne=r({name:"UniGoodsNav",emits:["click","buttonClick"],props:{options:{type:Array,default:()=>[{icon:"shop",text:be("uni-goods-nav.options.shop")},{icon:"cart",text:be("uni-goods-nav.options.cart")}]},buttonGroup:{type:Array,default:()=>[{text:be("uni-goods-nav.buttonGroup.addToCart"),backgroundColor:"linear-gradient(90deg, #FFCD1E, #FF8A18)",color:"#fff"},{text:be("uni-goods-nav.buttonGroup.buyNow"),backgroundColor:"linear-gradient(90deg, #FE6035, #EF1224)",color:"#fff"}]},fill:{type:Boolean,default:!1},stat:{type:Boolean,default:!1}},methods:{onClick(e,t){this.$emit("click",{index:e,content:t})},buttonClick(e,t){uni.report&&this.stat&&uni.report(t.text,t.text),this.$emit("buttonClick",{index:e,content:t})}}},[["render",function(t,n,s,a,i,l){const c=o(e.resolveDynamicComponent("uni-icons"),u);return e.openBlock(),e.createElementBlock("view",{class:"uni-goods-nav"},[e.createElementVNode("view",{class:"uni-tab__seat"}),e.createElementVNode("view",{class:"uni-tab__cart-box flex"},[e.createElementVNode("view",{class:"flex uni-tab__cart-sub-left"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.options,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"flex uni-tab__cart-button-left uni-tab__shop-cart",onClick:e=>l.onClick(o,t)},[e.createElementVNode("view",{class:"uni-tab__icon"},[e.createVNode(c,{type:t.icon,size:"20",color:"#646566"},null,8,["type"])]),e.createElementVNode("text",{class:"uni-tab__text"},e.toDisplayString(t.text),1),e.createElementVNode("view",{class:"flex uni-tab__dot-box"},[t.info?(e.openBlock(),e.createElementBlock("text",{key:0,class:e.normalizeClass([{"uni-tab__dots":t.info>9},"uni-tab__dot"]),style:e.normalizeStyle({backgroundColor:t.infoBackgroundColor?t.infoBackgroundColor:"#ff0000",color:t.infoColor?t.infoColor:"#fff"})},e.toDisplayString(t.info),7)):e.createCommentVNode("",!0)])],8,["onClick"])))),128))]),e.createElementVNode("view",{class:e.normalizeClass([{"uni-tab__right":s.fill},"flex uni-tab__cart-sub-right"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.buttonGroup,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,style:e.normalizeStyle({background:t.backgroundColor,color:t.color}),class:"flex uni-tab__cart-button-right",onClick:e=>l.buttonClick(o,t)},[e.createElementVNode("text",{style:e.normalizeStyle({color:t.color}),class:"uni-tab__cart-button-right-text"},e.toDisplayString(t.text),5)],12,["onClick"])))),128))],2)])])}],["__scopeId","data-v-adc4fce3"]]),Ee=r({__name:"goodsDetail",setup(t){a((e=>{s(e)}));const n=e.ref({}),s=async e=>{const{data:t}=await uni.$http.get("/api/public/v1/goods/detail",e);if(200!==t.meta.status)return uni.$showToast();t.message.goods_introduce=t.message.goods_introduce.replace(/<img /g,'<img style="display:block;" ').replace(/webp/g,"jpg"),n.value=t.message},i=e.ref([{icon:"shop",text:"店铺",infoBackgroundColor:"#007aff",infoColor:"red"},{icon:"cart",text:"购物车",info:0}]),l=e.ref([{text:"加入购物车",backgroundColor:"#ff0000",color:"#fff"},{text:"立即购买",backgroundColor:"#ffa200",color:"#fff"}]),c=e=>{"购物车"===e.content.text&&uni.switchTab({url:"/pages/cart/cart"})},r=q(),d=e=>{if("加入购物车"===e.content.text){const e={goods_id:n.value.goods_id,goods_name:n.value.goods_name,goods_price:n.value.goods_price,goods_count:1,goods_small_logo:n.value.goods_small_logo,goods_state:!0};r.addGoodsToCartList(e)}};return e.watch((()=>r.cartTotal),(e=>{i.value[1].info=e}),{immediate:!0,deep:!0}),(t,s)=>{const a=o(e.resolveDynamicComponent("uni-icons"),u),r=o(e.resolveDynamicComponent("uni-goods-nav"),Ne);return n.value.goods_name?(e.openBlock(),e.createElementBlock("view",{key:0,class:"goods-detail-container"},[e.createElementVNode("swiper",{"indicator-dots":!0,autoplay:!0,interval:3e3,duration:1e3,circular:!0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value.pics,((t,o)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:o},[e.createElementVNode("image",{src:t.pics_big,onClick:e=>{return t=o,void uni.previewImage({current:t,urls:n.value.pics.map((e=>e.pics_big))});var t}},null,8,["src","onClick"])])))),128))]),e.createElementVNode("view",{class:"goods-info-box"},[e.createElementVNode("view",{class:"price"},"￥"+e.toDisplayString(n.value.goods_price),1),e.createElementVNode("view",{class:"goods-info-body"},[e.createElementVNode("view",{class:"goods-name"},e.toDisplayString(n.value.goods_name),1),e.createElementVNode("view",{class:"favi"},[e.createVNode(a,{type:"star",size:"18",color:"gray"}),e.createElementVNode("text",null,"收藏")])]),e.createElementVNode("view",{class:"yf"},"快递：免运费")]),e.createElementVNode("rich-text",{nodes:n.value.goods_introduce},null,8,["nodes"]),e.createElementVNode("view",{class:"goods_nav"},[e.createVNode(r,{fill:!0,options:i.value,buttonGroup:l.value,onClick:c,onButtonClick:d},null,8,["options","buttonGroup"])])])):e.createCommentVNode("",!0)}}},[["__scopeId","data-v-cec0c0f8"]]),Ve={__name:"goodsList",setup(n){const s=e.ref({query:"",cid:"",pagenum:1,pagesize:20}),c=e.ref();a((e=>{c.value=e,s.value.query=c.value.query||"",s.value.cid=c.value.cid||"",p()}));const r=e.ref([]),u=e.ref(0),d=e.ref(!1),p=async e=>{d.value=!0;const{data:t}=await uni.$http.get("/api/public/v1/goods/search",s.value);if(200!==t.meta.status)return uni.$showToast();r.value=[...r.value,...t.message.goods],u.value=t.message.total,d.value=!1,e&&e()};i((()=>{if(!d.value){if(s.value.pagenum+=1,t("log","at goods/goodsList/goodsList.vue:44",r.value.length,u.value),r.value.length>=u.value)return uni.$showToast("暂时没有更多了!");p()}})),l((()=>{s.value.pagenum=1,u.value=0,d.value=!1,r.value=[],p((()=>uni.stopPullDownRefresh()))}));return(t,n)=>{const s=o(e.resolveDynamicComponent("my-goods"),Q);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"goods-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,onClick:e=>(e=>{uni.navigateTo({url:"/goods/goodsDetail/goodsDetail?goods_id="+e.goods_id})})(t)},[e.createVNode(s,{goods:t},null,8,["goods"])],8,["onClick"])))),128))])])}}},xe={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:Se}=we(xe);const Ce=r({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},textColor:{type:String,default:"#000000"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||Se("uni-search-bar.cancel")},placeholderText(){return this.placeholder||Se("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.searchVal="",this.$nextTick((()=>{this.$emit("clear",{value:""})}))},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,plus.key.hideSoftKeybord())},confirm(){plus.key.hideSoftKeybord(),this.$emit("confirm",{value:this.searchVal})},blur(){plus.key.hideSoftKeybord(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}},[["render",function(t,n,s,a,i,l){const c=o(e.resolveDynamicComponent("uni-icons"),u);return e.openBlock(),e.createElementBlock("view",{class:"uni-searchbar"},[e.createElementVNode("view",{style:e.normalizeStyle({borderRadius:s.radius+"px",backgroundColor:s.bgColor}),class:"uni-searchbar__box",onClick:n[5]||(n[5]=(...e)=>l.searchClick&&l.searchClick(...e))},[e.createElementVNode("view",{class:"uni-searchbar__box-icon-search"},[e.renderSlot(t.$slots,"searchIcon",{},(()=>[e.createVNode(c,{color:"#c0c4cc",size:"18",type:"search"})]),!0)]),i.show||i.searchVal?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,focus:i.showSync,disabled:s.readonly,placeholder:l.placeholderText,maxlength:s.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>i.searchVal=e),style:e.normalizeStyle({color:s.textColor}),onConfirm:n[1]||(n[1]=(...e)=>l.confirm&&l.confirm(...e)),onBlur:n[2]||(n[2]=(...e)=>l.blur&&l.blur(...e)),onFocus:n[3]||(n[3]=(...e)=>l.emitFocus&&l.emitFocus(...e))},null,44,["focus","disabled","placeholder","maxlength"])),[[e.vModelText,i.searchVal]]):(e.openBlock(),e.createElementBlock("text",{key:1,class:"uni-searchbar__text-placeholder"},e.toDisplayString(s.placeholder),1)),i.show&&("always"===s.clearButton||"auto"===s.clearButton&&""!==i.searchVal)&&!s.readonly?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-searchbar__box-icon-clear",onClick:n[4]||(n[4]=(...e)=>l.clear&&l.clear(...e))},[e.renderSlot(t.$slots,"clearIcon",{},(()=>[e.createVNode(c,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])):e.createCommentVNode("",!0)],4),"always"===s.cancelButton||i.show&&"auto"===s.cancelButton?(e.openBlock(),e.createElementBlock("text",{key:0,onClick:n[6]||(n[6]=(...e)=>l.cancel&&l.cancel(...e)),class:"uni-searchbar__cancel"},e.toDisplayString(l.cancelTextI18n),1)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-e15263ea"]]);const Be=r({name:"UniTag",emits:["click"],props:{type:{type:String,default:"default"},size:{type:String,default:"normal"},text:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},inverted:{type:[Boolean,String],default:!1},circle:{type:[Boolean,String],default:!1},mark:{type:[Boolean,String],default:!1},customStyle:{type:String,default:""}},computed:{classes(){const{type:e,disabled:t,inverted:o,circle:n,mark:s,size:a,isTrue:i}=this;return["uni-tag--"+e,"uni-tag--"+a,i(t)?"uni-tag--disabled":"",i(o)?"uni-tag--"+e+"--inverted":"",i(n)?"uni-tag--circle":"",i(s)?"uni-tag--mark":"",i(o)?"uni-tag--inverted uni-tag-text--"+e:"","small"===a?"uni-tag-text--small":""].join(" ")}},methods:{isTrue:e=>!0===e||"true"===e,onClick(){this.isTrue(this.disabled)||this.$emit("click")}}},[["render",function(t,o,n,s,a,i){return n.text?(e.openBlock(),e.createElementBlock("text",{key:0,class:e.normalizeClass(["uni-tag",i.classes]),style:e.normalizeStyle(n.customStyle),onClick:o[0]||(o[0]=(...e)=>i.onClick&&i.onClick(...e))},e.toDisplayString(n.text),7)):e.createCommentVNode("",!0)}],["__scopeId","data-v-c3d81dd8"]]),$e=r({__name:"goodsSearch",setup(n){const s=e.ref(),a=e=>{clearTimeout(s.value),s.value=setTimeout((()=>{l(e),t("log","at goods/goodsSearch/goodsSearch.vue:11",c.value)}),500)},i=e.ref([]),l=async e=>{if(""===e)return i.value=[],uni.$showToast("暂无数据",10);const{data:t}=await uni.$http.get("/api/public/v1/goods/qsearch",{query:e});if(200!==t.meta.status)return uni.$showToast();i.value=t.message,r(e)},c=e.ref(uni.getStorageSync("historyList")||[]),r=e=>{const t=new Set(c.value);t.delete(e),t.add(e),c.value=Array.from(t),uni.setStorageSync("historyList",d.value)},d=e.computed((()=>[...c.value].reverse())),p=()=>{c.value=[],uni.setStorageSync("historyList",d.value)},f=()=>{uni.navigateTo({url:"/goods/goodsList/goodsList"})};return(t,n)=>{const s=o(e.resolveDynamicComponent("uni-search-bar"),Ce),l=o(e.resolveDynamicComponent("uni-icons"),u),c=o(e.resolveDynamicComponent("uni-tag"),Be);return e.openBlock(),e.createElementBlock("view",null,[e.createVNode(s,{placeholder:"搜索",focus:"",radius:"150",class:"uni-search-bar",cancelButton:"none",clearButton:"auto",onInput:a}),0!==i.value.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"sugg-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"sugg-item",key:o,onClick:e=>{return o=t.goods_id,void uni.navigateTo({url:"/goods/goodsDetail/goodsDetail?goods_id="+o});var o}},[e.createElementVNode("view",{class:"goods-name"},e.toDisplayString(t.goods_name),1),e.createVNode(l,{type:"arrowright",size:"16"})],8,["onClick"])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"history-box"},[e.createElementVNode("view",{class:"history-title"},[e.createElementVNode("text",null,"搜索历史"),e.createVNode(l,{type:"trash",size:"17",onClick:p})]),e.createElementVNode("view",{class:"history-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,((t,o)=>(e.openBlock(),e.createBlock(c,{text:t,key:o,onClick:f},null,8,["text"])))),128))])]))])}}},[["__scopeId","data-v-3dac2db6"]]);__definePage("pages/home/home",J),__definePage("pages/cate/cate",X),__definePage("pages/cart/cart",ae),__definePage("pages/my/my",ce),__definePage("goods/goodsDetail/goodsDetail",Ee),__definePage("goods/goodsList/goodsList",Ve),__definePage("goods/goodsSearch/goodsSearch",$e);const Te={onLaunch:function(){t("log","at App.vue:4","App Launch")},onShow:function(){t("log","at App.vue:7","App Show")},onHide:function(){t("log","at App.vue:10","App Hide")}},Ie=(e="数据加载中",t="none")=>{uni.showLoading({title:e,icon:t})},Ae=uni.getWindowInfo();const ze=new class{constructor(e={}){this.baseUrl=e.baseUrl||"",this.url=e.url||"",this.method="GET",this.data=null,this.header=e.header||{},this.beforeRequest=null,this.afterRequest=null}get(e,t={}){return this.method="GET",this.url=this.baseUrl+e,this.data=t,this._()}post(e,t={}){return this.method="POST",this.url=this.baseUrl+e,this.data=t,this._()}put(e,t={}){return this.method="PUT",this.url=this.baseUrl+e,this.data=t,this._()}delete(e,t={}){return this.method="DELETE",this.url=this.baseUrl+e,this.data=t,this._()}_(){return this.header={},this.beforeRequest&&"function"==typeof this.beforeRequest&&this.beforeRequest(this),new Promise(((e,t)=>{let o=wx;"undefined"!=typeof uni&&(o=uni),o.request({url:this.url,method:this.method,data:this.data,header:this.header,success:t=>{e(t)},fail:e=>{t(e)},complete:e=>{this.afterRequest&&"function"==typeof this.afterRequest&&this.afterRequest(e)}})}))}};uni.$showToast=(e="数据加载失败！",t=1500,o="none")=>{uni.showToast({title:e,duration:t,icon:o})},uni.$showLoading=Ie,uni.$deviceInfo=Ae,e.createVueApp(Te).use(v());const De=H();ze.baseUrl="https://api-hmugo-web.itheima.net",ze.beforeRequest=function(e){Ie("数据加载中"),t("log","at main.js:39",e),-1!==e.url.indexOf("/my/")&&(e.header={Authorization:De.token})},ze.afterRequest=()=>{uni.hideLoading()},uni.$http=ze;const{app:Fe,Vuex:Le,Pinia:Oe}=function(){const t=e.createVueApp(Te);return t.use(v()),{app:t,Pinia:I}}();uni.Vuex=Le,uni.Pinia=Oe,Fe.provide("__globalStyles",__uniConfig.styles),Fe._component.mpType="app",Fe._component.render=()=>{},Fe.mount("#app")}(Vue);
